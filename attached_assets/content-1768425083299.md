[Skip to content](https://github.com/Polymarket/magic-proxy-builder-example#start-of-content)

You signed in with another tab or window. [Reload](https://github.com/Polymarket/magic-proxy-builder-example) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/Polymarket/magic-proxy-builder-example) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/Polymarket/magic-proxy-builder-example) to refresh your session.Dismiss alert

{{ message }}

[Polymarket](https://github.com/Polymarket)/ **[magic-proxy-builder-example](https://github.com/Polymarket/magic-proxy-builder-example)** Public

- [Notifications](https://github.com/login?return_to=%2FPolymarket%2Fmagic-proxy-builder-example) You must be signed in to change notification settings
- [Fork\\
0](https://github.com/login?return_to=%2FPolymarket%2Fmagic-proxy-builder-example)
- [Star\\
3](https://github.com/login?return_to=%2FPolymarket%2Fmagic-proxy-builder-example)


[3\\
stars](https://github.com/Polymarket/magic-proxy-builder-example/stargazers) [0\\
forks](https://github.com/Polymarket/magic-proxy-builder-example/forks) [Branches](https://github.com/Polymarket/magic-proxy-builder-example/branches) [Tags](https://github.com/Polymarket/magic-proxy-builder-example/tags) [Activity](https://github.com/Polymarket/magic-proxy-builder-example/activity)

[Star](https://github.com/login?return_to=%2FPolymarket%2Fmagic-proxy-builder-example)

[Notifications](https://github.com/login?return_to=%2FPolymarket%2Fmagic-proxy-builder-example) You must be signed in to change notification settings

# Polymarket/magic-proxy-builder-example

main

[**1** Branch](https://github.com/Polymarket/magic-proxy-builder-example/branches) [**0** Tags](https://github.com/Polymarket/magic-proxy-builder-example/tags)

[Go to Branches page](https://github.com/Polymarket/magic-proxy-builder-example/branches)[Go to Tags page](https://github.com/Polymarket/magic-proxy-builder-example/tags)

Go to file

Code

Open more actions menu

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ## Latest commit<br>[![ayv8er](https://avatars.githubusercontent.com/u/84942969?v=4&size=40)](https://github.com/ayv8er)[ayv8er](https://github.com/Polymarket/magic-proxy-builder-example/commits?author=ayv8er)<br>[Merge pull request](https://github.com/Polymarket/magic-proxy-builder-example/commit/a8cd96a7bfe725c085bc7d4f882519b60e4e6f05) [#1](https://github.com/Polymarket/magic-proxy-builder-example/pull/1) [from Polymarket/update-v2](https://github.com/Polymarket/magic-proxy-builder-example/commit/a8cd96a7bfe725c085bc7d4f882519b60e4e6f05)<br>Open commit detailssuccess<br>2 weeks agoDec 29, 2025<br>[a8cd96a](https://github.com/Polymarket/magic-proxy-builder-example/commit/a8cd96a7bfe725c085bc7d4f882519b60e4e6f05) · 2 weeks agoDec 29, 2025<br>## History<br>[15 Commits](https://github.com/Polymarket/magic-proxy-builder-example/commits/main/) <br>Open commit details<br>[View commit history for this file.](https://github.com/Polymarket/magic-proxy-builder-example/commits/main/) |
| [app](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/app "app") | [app](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/app "app") | [adds token id validation in prices route](https://github.com/Polymarket/magic-proxy-builder-example/commit/528a82ddf3e25e51d5f298fc55084f32fc9811b5 "adds token id validation in prices route") | 2 weeks agoDec 28, 2025 |
| [components](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/components "components") | [components](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/components "components") | [optimize gamma api to return more markets in categorized manner](https://github.com/Polymarket/magic-proxy-builder-example/commit/eabf57bd774ada9ff2eaf25ae3137613da240c2f "optimize gamma api to return more markets in categorized manner") | 3 weeks agoDec 24, 2025 |
| [constants](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/constants "constants") | [constants](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/constants "constants") | [optimize gamma api to return more markets in categorized manner](https://github.com/Polymarket/magic-proxy-builder-example/commit/eabf57bd774ada9ff2eaf25ae3137613da240c2f "optimize gamma api to return more markets in categorized manner") | 3 weeks agoDec 24, 2025 |
| [hooks](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/hooks "hooks") | [hooks](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/hooks "hooks") | [use relay client in server](https://github.com/Polymarket/magic-proxy-builder-example/commit/903b0ab04adee2bb758aa838cd18ab1ed459c2f8 "use relay client in server") | 3 weeks agoDec 24, 2025 |
| [providers](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/providers "providers") | [providers](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/providers "providers") | [refactors how pk is used to get proxy wallet](https://github.com/Polymarket/magic-proxy-builder-example/commit/15d4e18f4d0797b4e2fe3defb66124f4496d15cb "refactors how pk is used to get proxy wallet") | 3 weeks agoDec 24, 2025 |
| [utils](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/utils "utils") | [utils](https://github.com/Polymarket/magic-proxy-builder-example/tree/main/utils "utils") | [refactors how pk is used to get proxy wallet](https://github.com/Polymarket/magic-proxy-builder-example/commit/15d4e18f4d0797b4e2fe3defb66124f4496d15cb "refactors how pk is used to get proxy wallet") | 3 weeks agoDec 24, 2025 |
| [.env.local](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/.env.local ".env.local") | [.env.local](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/.env.local ".env.local") | [mvp](https://github.com/Polymarket/magic-proxy-builder-example/commit/be92b3567517db44998d5f9d2a04ad4e75edb0dd "mvp") | last monthDec 2, 2025 |
| [.gitignore](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/.gitignore ".gitignore") | [.gitignore](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/.gitignore ".gitignore") | [mvp](https://github.com/Polymarket/magic-proxy-builder-example/commit/be92b3567517db44998d5f9d2a04ad4e75edb0dd "mvp") | last monthDec 2, 2025 |
| [README.md](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/README.md "README.md") | [README.md](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/README.md "README.md") | [update readme](https://github.com/Polymarket/magic-proxy-builder-example/commit/d4e789c4b348e87194e28e4f90bce8336ee159e3 "update readme") | 3 weeks agoDec 24, 2025 |
| [eslint.config.mjs](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/eslint.config.mjs "eslint.config.mjs") | [eslint.config.mjs](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/eslint.config.mjs "eslint.config.mjs") | [init](https://github.com/Polymarket/magic-proxy-builder-example/commit/2745207ea7b0c2e2256fd7f3cedc31d190fbb17a "init") | 2 months agoNov 26, 2025 |
| [next.config.ts](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/next.config.ts "next.config.ts") | [next.config.ts](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/next.config.ts "next.config.ts") | [init](https://github.com/Polymarket/magic-proxy-builder-example/commit/2745207ea7b0c2e2256fd7f3cedc31d190fbb17a "init") | 2 months agoNov 26, 2025 |
| [package-lock.json](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/package-lock.json "package-lock.json") | [package-lock.json](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/package-lock.json "package-lock.json") | [bumps next version](https://github.com/Polymarket/magic-proxy-builder-example/commit/3fafd2ac780c216af01524d62bcb22727bea4e7f "bumps next version") | 3 weeks agoDec 24, 2025 |
| [package.json](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/package.json "package.json") | [package.json](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/package.json "package.json") | [bumps next version](https://github.com/Polymarket/magic-proxy-builder-example/commit/3fafd2ac780c216af01524d62bcb22727bea4e7f "bumps next version") | 3 weeks agoDec 24, 2025 |
| [postcss.config.mjs](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/postcss.config.mjs "postcss.config.mjs") | [postcss.config.mjs](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/postcss.config.mjs "postcss.config.mjs") | [init](https://github.com/Polymarket/magic-proxy-builder-example/commit/2745207ea7b0c2e2256fd7f3cedc31d190fbb17a "init") | 2 months agoNov 26, 2025 |
| [tsconfig.json](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/tsconfig.json "tsconfig.json") | [tsconfig.json](https://github.com/Polymarket/magic-proxy-builder-example/blob/main/tsconfig.json "tsconfig.json") | [init](https://github.com/Polymarket/magic-proxy-builder-example/commit/2745207ea7b0c2e2256fd7f3cedc31d190fbb17a "init") | 2 months agoNov 26, 2025 |
| View all files |

## Repository files navigation

# Polymarket Magic Link Integration Demo

[Permalink: Polymarket Magic Link Integration Demo](https://github.com/Polymarket/magic-proxy-builder-example#polymarket-magic-link-integration-demo)

A Next.js application demonstrating how to integrate Polymarket trading for users who've previously logged into and traded on Polymarket.com via **Magic Link (email/Google OAuth)**.

Non-Safe Proxy Wallets are deployed for Magic users on `Polymarket.com`. If your goal is to enable these traders to manage the same account on both apps, you will need to interact with this custom proxy wallet that's only used for Magic users.

## Key Features

[Permalink: Key Features](https://github.com/Polymarket/magic-proxy-builder-example#key-features)

- **Server-side private key handling** — Private key stored securely in `.env.local`
- **Deterministic proxy wallet derivation** — Non-Safe Proxy Wallet address derived via CREATE2
- **Server-side order signing** — All trading operations happen through API routes
- **Market & limit orders** — Market orders (FOK) and limit orders (GTC) with dynamic tick sizes
- **Position & order management** — View positions, active orders, and cancel orders
- **Gasless transactions** — Token approvals, transfers, and redemptions via Builder Relayer

* * *

## Table of Contents

[Permalink: Table of Contents](https://github.com/Polymarket/magic-proxy-builder-example#table-of-contents)

1. [Prerequisites](https://github.com/Polymarket/magic-proxy-builder-example#prerequisites)
2. [Quick Start](https://github.com/Polymarket/magic-proxy-builder-example#quick-start)
3. [Architecture Overview](https://github.com/Polymarket/magic-proxy-builder-example#architecture-overview)
4. [API Routes](https://github.com/Polymarket/magic-proxy-builder-example#api-routes)
5. [Key Implementation Details](https://github.com/Polymarket/magic-proxy-builder-example#key-implementation-details)
6. [Project Structure](https://github.com/Polymarket/magic-proxy-builder-example#project-structure)
7. [Environment Variables](https://github.com/Polymarket/magic-proxy-builder-example#environment-variables)
8. [Key Dependencies](https://github.com/Polymarket/magic-proxy-builder-example#key-dependencies)
9. [Troubleshooting](https://github.com/Polymarket/magic-proxy-builder-example#troubleshooting)

* * *

## Prerequisites

[Permalink: Prerequisites](https://github.com/Polymarket/magic-proxy-builder-example#prerequisites)

Before running this demo, you need:

1. **Magic Link Account on Polymarket**
   - Visit `polymarket.com` and sign up via Magic Link (email/Google)
   - Complete at least one trade to deploy your proxy wallet and set token approvals
2. **Magic Wallet Private Key**
   - Visit [reveal.magic.link/polymarket](https://reveal.magic.link/polymarket) after creating the account on `polymarket.com` and conducting one trade
   - Get your private key
3. **Polygon RPC URL**
   - Any Polygon mainnet RPC (Alchemy, Infura, or public RPC)
   - Defaults to a public RPC URL
4. **USDC.e Funds**
   - Send USDC.e to the **Non-Safe Proxy Wallet** (not EOA) for trading
   - If unsure of your Non-Safe Proxy Wallet address, get it from either the listed address on `polymarket.com` after logging in, or simply start this demo

* * *

## Quick Start

[Permalink: Quick Start](https://github.com/Polymarket/magic-proxy-builder-example#quick-start)

### Installation

[Permalink: Installation](https://github.com/Polymarket/magic-proxy-builder-example#installation)

```
npm install
```

### Environment Setup

[Permalink: Environment Setup](https://github.com/Polymarket/magic-proxy-builder-example#environment-setup)

Create `.env.local`:

```
# Required: Your Magic wallet private key (obtained from reveal.magic.link/polymarket)
POLYMARKET_MAGIC_PK=0x...your_private_key_here

# Optional: Custom Polygon RPC endpoint
NEXT_PUBLIC_POLYGON_RPC_URL=https://polygon-rpc.com
```

### Run Development Server

[Permalink: Run Development Server](https://github.com/Polymarket/magic-proxy-builder-example#run-development-server)

```
npm run dev
```

Open [http://localhost:3000](http://localhost:3000/)

* * *

## Architecture Overview

[Permalink: Architecture Overview](https://github.com/Polymarket/magic-proxy-builder-example#architecture-overview)

This demo uses a **server-side architecture** where the private key never leaves the server:

```
┌─────────────────────────────────────────────────────────────────┐
│  Browser (Client)                                               │
├─────────────────────────────────────────────────────────────────┤
│  • React UI components                                          │
│  • TradingSession context (stores API credentials in memory)    │
│  • Calls API routes for all wallet/trading operations           │
└──────────────────────────────┬──────────────────────────────────┘
                               │ HTTP Requests
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│  Next.js API Routes (Server)                                    │
├─────────────────────────────────────────────────────────────────┤
│  • Private key loaded from .env.local                           │
│  • Proxy wallet derivation                                      │
│  • API credential generation                                    │
│  • Order signing & submission                                   │
│  • Relay transactions (approvals, transfers, redemptions)       │
└──────────────────────────────┬──────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│  Polymarket APIs                                                │
├─────────────────────────────────────────────────────────────────┤
│  • CLOB API (clob.polymarket.com) — Orders, prices, tick sizes  │
│  • Data API (data-api.polymarket.com) — Positions               │
│  • Gamma API (gamma-api.polymarket.com) — Market data           │
│  • Builder Relayer — Gasless transactions                       │
└─────────────────────────────────────────────────────────────────┘
```

* * *

## API Routes

[Permalink: API Routes](https://github.com/Polymarket/magic-proxy-builder-example#api-routes)

### Wallet Operations

[Permalink: Wallet Operations](https://github.com/Polymarket/magic-proxy-builder-example#wallet-operations)

| Route | Method | Description |
| --- | --- | --- |
| `/api/wallet` | GET | Returns EOA and derived proxy wallet addresses |
| `/api/wallet/credentials` | POST | Creates or derives User API credentials |
| `/api/wallet/relay` | POST | Executes gasless relay transactions (approvals, transfers, redemptions) |

### Order Management

[Permalink: Order Management](https://github.com/Polymarket/magic-proxy-builder-example#order-management)

| Route | Method | Description |
| --- | --- | --- |
| `/api/orders` | POST | Creates and submits market/limit orders |
| `/api/orders` | DELETE | Cancels an active order |
| `/api/orders/active` | GET | Fetches all active orders for the wallet |

### Market Data

[Permalink: Market Data](https://github.com/Polymarket/magic-proxy-builder-example#market-data)

| Route | Method | Description |
| --- | --- | --- |
| `/api/polymarket/markets` | GET | Fetches high-volume markets from Gamma API |
| `/api/polymarket/market-by-token` | GET | Fetches market details by token ID |
| `/api/polymarket/positions` | GET | Fetches user positions from Data API |
| `/api/polymarket/prices` | POST | Batch fetches real-time bid/ask prices |
| `/api/polymarket/tick-size` | GET | Fetches minimum tick size for a token |
| `/api/polymarket/sign` | POST | Signs messages for Builder authentication |

* * *

## Key Implementation Details

[Permalink: Key Implementation Details](https://github.com/Polymarket/magic-proxy-builder-example#key-implementation-details)

### 1\. Server-Side Wallet Management

[Permalink: 1. Server-Side Wallet Management](https://github.com/Polymarket/magic-proxy-builder-example#1-server-side-wallet-management)

**File**: `app/api/wallet/route.ts`

The private key is loaded from environment variables and never exposed to the client:

```
import { Wallet, providers } from "ethers";
import { deriveProxyAddress } from "@/utils/proxyWallet";

const privateKey = process.env.POLYMARKET_MAGIC_PK;
const provider = new providers.JsonRpcProvider(POLYGON_RPC_URL);
const wallet = new Wallet(privateKey, provider);
const proxyAddress = deriveProxyAddress(wallet.address);
```

### 2\. Proxy Wallet Derivation

[Permalink: 2. Proxy Wallet Derivation](https://github.com/Polymarket/magic-proxy-builder-example#2-proxy-wallet-derivation)

**File**: `utils/proxyWallet.ts`

Polymarket's Magic auth creates a **Non-Safe Proxy Wallet** (EIP-1167 minimal proxy) that is deterministically derived from the user's EOA using CREATE2:

```
import { keccak256, getCreate2Address, encodePacked } from "viem";
import { PROXY_FACTORY, PROXY_INIT_CODE_HASH } from "@/constants/proxyWallet";

export function deriveProxyAddress(eoaAddress: string): string {
  return getCreate2Address({
    bytecodeHash: PROXY_INIT_CODE_HASH,
    from: PROXY_FACTORY,
    salt: keccak256(encodePacked(["address"], [eoaAddress])),
  });
}
```

**Key Points:**

- Proxy address is **deterministic** — same EOA always gets same proxy address
- Proxy is the "funder" address that holds USDC.e and outcome tokens
- User must fund the **Proxy Wallet**, not the EOA

### 3\. Order Placement

[Permalink: 3. Order Placement](https://github.com/Polymarket/magic-proxy-builder-example#3-order-placement)

**File**: `app/api/orders/route.ts`

Orders are signed and submitted server-side:

#### Market Orders (Fill or Kill)

[Permalink: Market Orders (Fill or Kill)](https://github.com/Polymarket/magic-proxy-builder-example#market-orders-fill-or-kill)

```
import { ClobClient, Side, OrderType } from "@polymarket/clob-client";

const marketOrder: UserMarketOrder = {
  tokenID: tokenId,
  amount: dollarAmount,  // For BUY: size * askPrice
  side: Side.BUY,
  feeRateBps: 0,
};

await clobClient.createAndPostMarketOrder(
  marketOrder,
  { negRisk: false },
  OrderType.FOK  // Fill or Kill — immediate execution or cancel
);
```

#### Limit Orders (Good Till Cancelled)

[Permalink: Limit Orders (Good Till Cancelled)](https://github.com/Polymarket/magic-proxy-builder-example#limit-orders-good-till-cancelled)

```
const limitOrder: UserOrder = {
  tokenID: tokenId,
  price: 0.55,  // Must be multiple of tick size
  size: shares,
  side: Side.BUY,
  feeRateBps: 0,
  expiration: 0,
  taker: "0x0000000000000000000000000000000000000000",
};

await clobClient.createAndPostOrder(
  limitOrder,
  { negRisk: false },
  OrderType.GTC  // Good Till Cancelled
);
```

### 4\. Dynamic Tick Sizes

[Permalink: 4. Dynamic Tick Sizes](https://github.com/Polymarket/magic-proxy-builder-example#4-dynamic-tick-sizes)

**File**: `app/api/polymarket/tick-size/route.ts`

Different markets have different minimum tick sizes (0.1, 0.01, 0.001, 0.0001). The order modal fetches the tick size and:

- Validates price is within valid range
- Ensures price is a multiple of tick size
- Constrains input decimal places accordingly

```
const tickSize = await clobClient.getTickSize(tokenId);
// Returns: 0.01, 0.001, 0.0001, etc.
```

### 5\. Gasless Relay Transactions

[Permalink: 5. Gasless Relay Transactions](https://github.com/Polymarket/magic-proxy-builder-example#5-gasless-relay-transactions)

**File**: `app/api/wallet/relay/route.ts`

Token approvals, USDC transfers, and position redemptions use the Builder Relayer for gasless execution:

```
import { RelayClient, RelayerTxType, CallType, encodeProxyTransactionData } from "@polymarket/builder-relayer-client";
import { buildProxyTransactionRequest, calculateGasLimit } from "@/utils/relay";

// Get relay payload (nonce + relay address) from relayer
const relayPayload = await relayClient.getRelayPayload(from, "PROXY");

// Encode transactions (e.g., ERC20 transfer)
const proxyTxns = transactions.map(txn => ({
  to: txn.to,
  typeCode: CallType.Call,
  data: txn.data,
  value: "0",
}));

// Build signed transaction with dynamic gas limit
const txRequest = await buildProxyTransactionRequest(signer, {
  from,
  data: encodeProxyTransactionData(proxyTxns),
  gasLimit: calculateGasLimit(transactions.length),
  relay: relayPayload.address,
  nonce: relayPayload.nonce,
});

// Submit to relayer
await fetch(`${RELAYER_URL}submit`, { method: "POST", body: JSON.stringify(txRequest) });
```

* * *

## Project Structure

[Permalink: Project Structure](https://github.com/Polymarket/magic-proxy-builder-example#project-structure)

```
magic-pk/
├── app/
│   ├── api/
│   │   ├── orders/
│   │   │   ├── route.ts              # Create/cancel orders
│   │   │   └── active/
│   │   │       └── route.ts          # Fetch active orders
│   │   ├── polymarket/
│   │   │   ├── market-by-token/
│   │   │   │   └── route.ts          # Market lookup by token
│   │   │   ├── markets/
│   │   │   │   └── route.ts          # High-volume markets
│   │   │   ├── positions/
│   │   │   │   └── route.ts          # User positions
│   │   │   ├── prices/
│   │   │   │   └── route.ts          # Batch price fetching
│   │   │   ├── sign/
│   │   │   │   └── route.ts          # Builder authentication
│   │   │   └── tick-size/
│   │   │       └── route.ts          # Market tick sizes
│   │   └── wallet/
│   │       ├── route.ts              # EOA/proxy addresses
│   │       ├── credentials/
│   │       │   └── route.ts          # API credentials
│   │       └── relay/
│   │           └── route.ts          # Gasless transactions
│   ├── layout.tsx
│   └── page.tsx
│
├── components/
│   ├── Header.tsx                    # Wallet address display
│   ├── PolygonAssets/
│   │   ├── index.tsx                 # Balance display
│   │   └── TransferModal.tsx         # USDC transfer UI
│   ├── Trading/
│   │   ├── MarketTabs.tsx            # Tab navigation
│   │   ├── Markets/
│   │   │   └── index.tsx             # Market browser
│   │   ├── OrderModal/
│   │   │   ├── index.tsx             # Order placement UI
│   │   │   ├── OrderForm.tsx         # Size/price inputs
│   │   │   ├── OrderSummary.tsx      # Cost calculation
│   │   │   └── OrderTypeToggle.tsx   # Market/limit toggle
│   │   ├── Orders/
│   │   │   └── index.tsx             # Active orders list
│   │   └── Positions/
│   │       └── index.tsx             # Position cards
│   └── TradingSession/
│       └── index.tsx                 # Session initialization UI
│
├── hooks/
│   ├── useActiveOrders.ts            # Fetch/cancel orders via API
│   ├── useAddressCopy.ts             # Copy address to clipboard
│   ├── useClobOrder.ts               # Submit orders via API
│   ├── useGeoblock.ts                # Geo-restriction detection
│   ├── useMarkets.ts                 # Fetch markets from Gamma API
│   ├── usePolygonBalances.ts         # Check USDC.e balance
│   ├── useRedeemPosition.ts          # Redeem via API
│   ├── useTokenApprovals.ts          # Approve via API
│   ├── useTradingSession.ts          # Session management
│   ├── useUsdcTransfer.ts            # Transfer via API
│   ├── useUserApiCredentials.ts      # API credentials management
│   └── useUserPositions.ts           # Fetch positions
│
├── providers/
│   ├── QueryProvider.tsx             # TanStack Query setup
│   ├── TradingProvider.tsx           # Trading session context
│   └── WalletProvider.tsx            # Wallet addresses context
│
├── utils/
│   ├── approvals.ts                  # Token approval logic
│   ├── classNames.ts                 # CSS class utilities
│   ├── formatting.ts                 # Number/address formatting
│   ├── order.ts                      # Order helpers
│   ├── polling.ts                    # Async polling utilities
│   ├── proxyWallet.ts                # CREATE2 proxy derivation
│   ├── redeem.ts                     # Position redemption logic
│   ├── relay.ts                      # Relay transaction building
│   ├── session.ts                    # TradingSession type
│   ├── transfers.ts                  # USDC transfer utilities
│   └── validation.ts                 # Input validation
│
└── constants/
    ├── api.ts                        # API endpoint URLs
    ├── categories.ts                 # Market categories
    ├── polymarket.ts                 # API URLs, chain ID
    ├── proxyWallet.ts                # Proxy contract addresses
    ├── query.ts                      # React Query keys
    ├── tokens.ts                     # Token addresses
    ├── ui.ts                         # UI constants
    └── validation.ts                 # Validation constants
```

* * *

## Environment Variables

[Permalink: Environment Variables](https://github.com/Polymarket/magic-proxy-builder-example#environment-variables)

Create `.env.local`:

```
# Required: Your Magic wallet private key
POLYMARKET_MAGIC_PK=0x...your_64_character_hex_private_key

# Optional: Custom Polygon RPC endpoint (defaults to public RPC)
NEXT_PUBLIC_POLYGON_RPC_URL=https://polygon-rpc.com
```

**⚠️ Security Notes:**

- Never commit `.env.local` to version control
- The private key is only accessible server-side
- In production, use proper secrets management (Vault, AWS Secrets Manager, etc.)

* * *

## Key Dependencies

[Permalink: Key Dependencies](https://github.com/Polymarket/magic-proxy-builder-example#key-dependencies)

| Package | Version | Purpose |
| --- | --- | --- |
| [`@polymarket/clob-client`](https://github.com/Polymarket/clob-client) | ^4.22.8 | Order placement, API credentials, prices |
| [`@polymarket/builder-relayer-client`](https://github.com/Polymarket/builder-relayer-client) | ^0.0.8 | Gasless relay transactions |
| [`@polymarket/builder-signing-sdk`](https://github.com/Polymarket/builder-signing-sdk) | ^0.0.8 | Builder authentication |
| [`@tanstack/react-query`](https://tanstack.com/query) | ^5.90.10 | Server state management |
| [`ethers`](https://docs.ethers.org/v5/) | ^5.8.0 | Wallet creation, signing |
| [`viem`](https://viem.sh/) | ^2.39.2 | Address derivation, hashing |
| [`next`](https://nextjs.org/) | ^16.0.10 | React framework, API routes |

* * *

## Troubleshooting

[Permalink: Troubleshooting](https://github.com/Polymarket/magic-proxy-builder-example#troubleshooting)

### "Wallet not configured"

[Permalink: "Wallet not configured"](https://github.com/Polymarket/magic-proxy-builder-example#wallet-not-configured)

- Ensure `POLYMARKET_MAGIC_PK` is set in `.env.local`
- Private key must start with `0x` and be 66 characters total

### Balance shows $0.00

[Permalink: Balance shows $0.00](https://github.com/Polymarket/magic-proxy-builder-example#balance-shows-000)

- Ensure you funded the **Proxy Wallet**, not the EOA
- Check [Polygonscan](https://polygonscan.com/) for confirmation
- The app displays the proxy wallet address — send USDC.e there

### "Order submission failed"

[Permalink: "Order submission failed"](https://github.com/Polymarket/magic-proxy-builder-example#order-submission-failed)

- Check USDC.e balance in proxy wallet
- Ensure trading session is initialized (click "Initialize" button)
- For limit orders, ensure price is a valid multiple of tick size

### Market orders sitting as limit orders

[Permalink: Market orders sitting as limit orders](https://github.com/Polymarket/magic-proxy-builder-example#market-orders-sitting-as-limit-orders)

- Market orders use FOK (Fill or Kill) — they should execute immediately or fail
- If liquidity is low, the order may fail instead of partially filling

### "Proxy wallet not deployed"

[Permalink: "Proxy wallet not deployed"](https://github.com/Polymarket/magic-proxy-builder-example#proxy-wallet-not-deployed)

- Must log in to `polymarket.com` at least once via Magic Link
- Complete at least one trade to deploy the proxy and set approvals
- Proxy deployment happens on Polymarket, not in this app

### Price/tick size validation errors

[Permalink: Price/tick size validation errors](https://github.com/Polymarket/magic-proxy-builder-example#pricetick-size-validation-errors)

- Each market has a different tick size (0.01, 0.001, etc.)
- The order modal shows the allowed tick size and valid range
- Prices must be exact multiples of the tick size

* * *

## Resources

[Permalink: Resources](https://github.com/Polymarket/magic-proxy-builder-example#resources)

### Polymarket Documentation

[Permalink: Polymarket Documentation](https://github.com/Polymarket/magic-proxy-builder-example#polymarket-documentation)

- [CLOB Client Docs](https://docs.polymarket.com/developers/CLOB/clients)
- [Authentication](https://docs.polymarket.com/developers/CLOB/authentication)
- [Order Placement](https://docs.polymarket.com/quickstart/orders/first-order)
- [Proxy Wallets](https://docs.polymarket.com/developers/proxy-wallet)

### GitHub Repositories

[Permalink: GitHub Repositories](https://github.com/Polymarket/magic-proxy-builder-example#github-repositories)

- [clob-client](https://github.com/Polymarket/clob-client)
- [builder-relayer-client](https://github.com/Polymarket/builder-relayer-client)

### Other Resources

[Permalink: Other Resources](https://github.com/Polymarket/magic-proxy-builder-example#other-resources)

- [Magic Link Documentation](https://magic.link/docs)
- [EIP-712 Specification](https://eips.ethereum.org/EIPS/eip-712)
- [EIP-1167 Minimal Proxy](https://eips.ethereum.org/EIPS/eip-1167)

* * *

## Support

[Permalink: Support](https://github.com/Polymarket/magic-proxy-builder-example#support)

Questions or issues? Reach out on Telegram: **[@notyrjo](https://t.me/notyrjo)**

* * *

## License

[Permalink: License](https://github.com/Polymarket/magic-proxy-builder-example#license)

MIT

* * *

**Built for developers exploring the Polymarket ecosystem**

## About

No description, website, or topics provided.


### Resources

[Readme](https://github.com/Polymarket/magic-proxy-builder-example#readme-ov-file)

### Uh oh!

There was an error while loading. [Please reload this page](https://github.com/Polymarket/magic-proxy-builder-example).

[Activity](https://github.com/Polymarket/magic-proxy-builder-example/activity)

[Custom properties](https://github.com/Polymarket/magic-proxy-builder-example/custom-properties)

### Stars

[**3**\\
stars](https://github.com/Polymarket/magic-proxy-builder-example/stargazers)

### Watchers

[**0**\\
watching](https://github.com/Polymarket/magic-proxy-builder-example/watchers)

### Forks

[**0**\\
forks](https://github.com/Polymarket/magic-proxy-builder-example/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FPolymarket%2Fmagic-proxy-builder-example&report=Polymarket+%28user%29)

## [Releases](https://github.com/Polymarket/magic-proxy-builder-example/releases)

No releases published

## [Packages\  0](https://github.com/orgs/Polymarket/packages?repo_name=magic-proxy-builder-example)

No packages published

### Uh oh!

There was an error while loading. [Please reload this page](https://github.com/Polymarket/magic-proxy-builder-example).

## Languages

- [TypeScript99.3%](https://github.com/Polymarket/magic-proxy-builder-example/search?l=typescript)
- Other0.7%

You can’t perform that action at this time.